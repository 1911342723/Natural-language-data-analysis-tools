# å‰ç«¯æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ¯ è®¾è®¡ç›®æ ‡

åŸºäº **Jupyter Notebook æ‰§è¡Œæ¨¡å¼** çš„æ™ºèƒ½æ•°æ®åˆ†æå‰ç«¯ï¼Œæ ¸å¿ƒç‰¹ç‚¹ï¼š
1. **Agent æ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–**ï¼šå®æ—¶å±•ç¤º AI ç”Ÿæˆä»£ç  â†’ æ‰§è¡Œ â†’ åˆ¤æ–­ â†’ ä¿®å¤çš„å®Œæ•´æµç¨‹
2. **äº¤äº’å¼æ•°æ®åˆ†æ**ï¼šç±»ä¼¼ Jupyter çš„å•å…ƒæ ¼æ‰§è¡Œæ¨¡å¼
3. **è‡ªç„¶è¯­è¨€é©±åŠ¨**ï¼šç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒAI ç”Ÿæˆå¹¶æ‰§è¡Œä»£ç 

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·ç•Œé¢å±‚                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  æ–‡ä»¶ä¸Šä¼     â”‚  â”‚  å­—æ®µé€‰æ‹©    â”‚  â”‚  å¯¹è¯äº¤äº’    â”‚     â”‚
â”‚  â”‚  ç»„ä»¶        â”‚  â”‚  ç»„ä»¶        â”‚  â”‚  ç»„ä»¶        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Agent æ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–ç»„ä»¶ â­                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚  â”‚  â”‚Step1â”‚â†’â”‚Step2â”‚â†’â”‚Step3â”‚â†’â”‚Step4â”‚                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚  â”‚  æ¯ä¸ªæ­¥éª¤åŒ…å«ï¼š                                       â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆçš„ä»£ç ï¼ˆMonaco Editorï¼‰                       â”‚   â”‚
â”‚  â”‚  - æ‰§è¡Œè¾“å‡ºï¼ˆstdout/stderrï¼‰                        â”‚   â”‚
â”‚  â”‚  - é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰                                â”‚   â”‚
â”‚  â”‚  - ä¿®å¤å»ºè®®ï¼ˆAIç”Ÿæˆï¼‰                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              ç»“æœå±•ç¤ºç»„ä»¶                             â”‚   â”‚
â”‚  â”‚  - AI æ€»ç»“ï¼ˆMarkdownï¼‰                               â”‚   â”‚
â”‚  â”‚  - è¡¨æ ¼æ•°æ®ï¼ˆæ”¯æŒæ’åº/ç­›é€‰/å¯¼å‡ºï¼‰                    â”‚   â”‚
â”‚  â”‚  - å›¾è¡¨ï¼ˆæ”¯æŒæŸ¥çœ‹å¤§å›¾/ä¸‹è½½ï¼‰                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        çŠ¶æ€ç®¡ç†å±‚                             â”‚
â”‚                      (Zustand Store)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - fileData: ä¸Šä¼ çš„æ–‡ä»¶æ•°æ®                                  â”‚
â”‚  - selectedColumns: ç”¨æˆ·é€‰æ‹©çš„å­—æ®µ                           â”‚
â”‚  - sessionId: Jupyter Session ID                            â”‚
â”‚  - agentSteps: Agent æ‰§è¡Œæ­¥éª¤æ•°ç»„                            â”‚
â”‚  - conversations: å¯¹è¯å†å²                                   â”‚
â”‚  - currentResult: å½“å‰åˆ†æç»“æœ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API æœåŠ¡å±‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - uploadFile(): ä¸Šä¼ æ–‡ä»¶                                    â”‚
â”‚  - createSession(): åˆ›å»º Jupyter Session                    â”‚
â”‚  - submitAnalysisRequest(): æäº¤åˆ†æéœ€æ±‚                     â”‚
â”‚  - getAgentStatus(): è½®è¯¢ Agent çŠ¶æ€                         â”‚
â”‚  - exportResult(): å¯¼å‡ºç»“æœ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯ API (FastAPI)                         â”‚
â”‚                  Jupyter Kernel Manager                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ ¸å¿ƒäº¤äº’æµç¨‹

### 1. æ–‡ä»¶ä¸Šä¼ æµç¨‹

```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶
    â†“
FileUpload ç»„ä»¶è§¦å‘ä¸Šä¼ 
    â†“
è°ƒç”¨ uploadFile() API
    â†“
æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡
    â†“
åç«¯è§£ææ–‡ä»¶å¹¶è¿”å›ï¼š
  - columns: å­—æ®µåˆ—è¡¨ï¼ˆå«ç±»å‹ï¼‰
  - preview: å‰100è¡Œæ•°æ®
  - statistics: ç»Ÿè®¡ä¿¡æ¯
    â†“
æ›´æ–° Storeï¼šsetFileData()
    â†“
è‡ªåŠ¨å±•ç¤ºæ•°æ®é¢„è§ˆ + å­—æ®µé€‰æ‹©ä¾§è¾¹æ 
```

### 2. Agent æ‰§è¡Œæµç¨‹ â­

```
ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€éœ€æ±‚ + é€‰æ‹©å­—æ®µ
    â†“
ç‚¹å‡»"å‘é€"æŒ‰é’®
    â†“
ChatArea ç»„ä»¶å¤„ç†ï¼š
  1. åˆ›å»º/è·å– Session ID
  2. è°ƒç”¨ submitAnalysisRequest()
  3. è·å– task_id
    â†“
å¯åŠ¨è½®è¯¢ï¼šæ¯2ç§’è°ƒç”¨ getAgentStatus(task_id)
    â†“
AgentExecution ç»„ä»¶å±•ç¤ºå®æ—¶æ­¥éª¤ï¼š

Step 1: ç”Ÿæˆä»£ç ï¼ˆç¬¬1æ¬¡å°è¯•ï¼‰
  - AI æ ¹æ®éœ€æ±‚ç”Ÿæˆ Python ä»£ç 
  - å±•ç¤ºä»£ç ï¼ˆMonaco Editorï¼‰
  - çŠ¶æ€: running
    â†“
Step 2: æ‰§è¡Œä»£ç 
  - åœ¨ Jupyter Kernel ä¸­æ‰§è¡Œ
  - å±•ç¤ºæ‰§è¡Œè¾“å‡ºï¼ˆstdoutï¼‰
  - çŠ¶æ€: running
    â†“
Step 3: åˆ¤æ–­ç»“æœ
  - æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
  - å¦‚æœæˆåŠŸ â†’ Step 5
  - å¦‚æœå¤±è´¥ â†’ Step 4
    â†“
Step 4: é”™è¯¯åˆ†æ + ä¿®å¤ï¼ˆå¦‚æœéœ€è¦ï¼‰
  - AI åˆ†æé”™è¯¯ä¿¡æ¯
  - ç”Ÿæˆä¿®å¤åçš„ä»£ç 
  - é‡æ–°æ‰§è¡Œï¼ˆå›åˆ° Step 2ï¼‰
  - çŠ¶æ€: failed â†’ running
    â†“
Step 5: æˆåŠŸ âœ…
  - å±•ç¤ºåˆ†æç»“æœ
  - AI ç”Ÿæˆæ€»ç»“
  - çŠ¶æ€: success
    â†“
åœæ­¢è½®è¯¢
æ›´æ–° currentResult
æ·»åŠ åˆ°å¯¹è¯å†å²
```

### 3. è½®è¯¢æœºåˆ¶

```javascript
// AgentExecution.jsx
useEffect(() => {
  if (!currentTaskId || !polling) return

  const pollInterval = setInterval(async () => {
    const response = await getAgentStatus(currentTaskId)
    
    // æ›´æ–°æ­¥éª¤
    if (response.data.steps) {
      response.data.steps.forEach((step, index) => {
        if (index >= agentSteps.length) {
          addAgentStep(step)  // æ–°æ­¥éª¤
        } else {
          updateAgentStep(index, step)  // æ›´æ–°å·²æœ‰æ­¥éª¤
        }
      })
    }
    
    // å®Œæˆæˆ–å¤±è´¥æ—¶åœæ­¢è½®è¯¢
    if (response.status === 'completed' || response.status === 'failed') {
      setPolling(false)
      setAgentExecuting(false)
    }
  }, 2000)

  return () => clearInterval(pollInterval)
}, [currentTaskId, polling])
```

---

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 1. AgentExecution ç»„ä»¶ â­â­â­

**æœ€æ ¸å¿ƒçš„ç»„ä»¶**ï¼Œè´Ÿè´£å±•ç¤º Agent æ‰§è¡Œè¿‡ç¨‹ã€‚

```javascript
<AgentExecution>
  {/* æ­¥éª¤æµç¨‹å›¾ */}
  <Steps current={currentStep}>
    {agentSteps.map(step => (
      <Step
        title={step.title}
        status={step.status}  // process/finish/error
        icon={step.icon}
      />
    ))}
  </Steps>

  {/* æ¯ä¸ªæ­¥éª¤çš„è¯¦ç»†ä¿¡æ¯ */}
  <Collapse activeKey={currentStep}>
    {agentSteps.map((step, index) => (
      <Panel key={index}>
        {/* ä»£ç  */}
        {step.code && (
          <Editor
            language="python"
            value={step.code}
            readOnly
          />
        )}

        {/* è¾“å‡º */}
        {step.output && (
          <pre>{step.output}</pre>
        )}

        {/* é”™è¯¯ */}
        {step.error && (
          <Alert type="error" message={step.error} />
        )}

        {/* ç»“æœ */}
        {step.result && (
          <ResultDisplay result={step.result} />
        )}
      </Panel>
    ))}
  </Collapse>
</AgentExecution>
```

**æ•°æ®ç»“æ„ï¼š**

```javascript
// agentStep å¯¹è±¡ç»“æ„
{
  title: "æ­¥éª¤1ï¼šç”Ÿæˆä»£ç ",
  description: "æ ¹æ®ç”¨æˆ·éœ€æ±‚ç”Ÿæˆ Python åˆ†æä»£ç ",
  status: "running",  // running | success | failed
  code: "import pandas as pd\n...",
  output: "âœ… æ•°æ®åŠ è½½æˆåŠŸ\n...",
  error: null,
  result: {
    table_data: [...],
    chart_base64: "...",
    summary: "..."
  }
}
```

### 2. ChatArea ç»„ä»¶

å¯¹è¯äº¤äº’çš„æ ¸å¿ƒç»„ä»¶ã€‚

```javascript
<ChatArea>
  {/* å¯¹è¯å†å² */}
  <ConversationList>
    {conversations.map(conv => (
      <div className={conv.type}>
        {conv.type === 'user' ? (
          <p>{conv.content}</p>
        ) : (
          <ReactMarkdown>{conv.content}</ReactMarkdown>
        )}
      </div>
    ))}
  </ConversationList>

  {/* Agent æ‰§è¡ŒåŒºï¼ˆåŠ¨æ€æ˜¾ç¤ºï¼‰ */}
  {agentExecuting && <AgentExecution />}

  {/* è¾“å…¥åŒº */}
  <div className="input-area">
    <TextArea
      value={userInput}
      placeholder="æè¿°ä½ çš„æ•°æ®åˆ†æéœ€æ±‚..."
      onPressEnter={handleSubmit}
    />
    <Button onClick={handleSubmit}>å‘é€</Button>
  </div>
</ChatArea>
```

### 3. FieldSelector ç»„ä»¶

å­—æ®µé€‰æ‹©ä¾§è¾¹æ ã€‚

```javascript
<FieldSelector>
  {/* æœç´¢ */}
  <Input placeholder="æœç´¢å­—æ®µ..." />

  {/* å­—æ®µåˆ—è¡¨ */}
  {columns.map(col => (
    <div
      className={selectedColumns.includes(col.name) ? 'selected' : ''}
      onClick={() => toggleColumn(col.name)}
    >
      <Checkbox checked={selectedColumns.includes(col.name)}>
        {col.name}
        <Tag color={getTypeColor(col.type)}>{col.type}</Tag>
      </Checkbox>
    </div>
  ))}

  {/* å·²é€‰å­—æ®µé¢„è§ˆ */}
  <Table
    columns={selectedColumns}
    dataSource={dataPreview.slice(0, 5)}
  />
</FieldSelector>
```

---

## ğŸ¨ UI/UX è®¾è®¡åŸåˆ™

### 1. æ¸è¿›å¼ä¿¡æ¯å±•ç¤º

```
åˆå§‹çŠ¶æ€ï¼š
  â””â”€ æ˜¾ç¤ºæ–‡ä»¶ä¸Šä¼ ç•Œé¢ï¼ˆå…¨å±ï¼‰

ä¸Šä¼ æ–‡ä»¶åï¼š
  â”œâ”€ å·¦ä¾§ï¼šå­—æ®µé€‰æ‹©ä¾§è¾¹æ ï¼ˆå¯æŠ˜å ï¼‰
  â””â”€ å³ä¾§ï¼š
      â”œâ”€ æ•°æ®é¢„è§ˆï¼ˆå¯æ”¶èµ·ï¼‰
      â””â”€ å¯¹è¯åŒº

å¼€å§‹åˆ†æåï¼š
  â””â”€ å¯¹è¯åŒºæ‰©å±•ï¼Œæ˜¾ç¤ºï¼š
      â”œâ”€ å¯¹è¯å†å²
      â”œâ”€ Agent æ‰§è¡Œè¿‡ç¨‹ï¼ˆå®æ—¶æ›´æ–°ï¼‰
      â””â”€ è¾“å…¥æ¡†

å®Œæˆåˆ†æåï¼š
  â””â”€ æ˜¾ç¤ºç»“æœï¼š
      â”œâ”€ AI æ€»ç»“
      â”œâ”€ è¡¨æ ¼æ•°æ®
      â””â”€ å›¾è¡¨
```

### 2. è§†è§‰åé¦ˆ

- **åŠ è½½çŠ¶æ€**ï¼šæ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½æœ‰åŠ è½½åŠ¨ç”»
- **è¿›åº¦æŒ‡ç¤º**ï¼šæ–‡ä»¶ä¸Šä¼ æ˜¾ç¤ºè¿›åº¦æ¡
- **çŠ¶æ€é¢œè‰²**ï¼š
  - è“è‰²ï¼šè¿›è¡Œä¸­ï¼ˆprocessingï¼‰
  - ç»¿è‰²ï¼šæˆåŠŸï¼ˆsuccessï¼‰
  - çº¢è‰²ï¼šå¤±è´¥ï¼ˆerrorï¼‰
- **åŠ¨ç”»æ•ˆæœ**ï¼šå¯¹è¯æ¶ˆæ¯æ·¡å…¥ã€Agent æ­¥éª¤å±•å¼€

### 3. é”™è¯¯å¤„ç†

æ‰€æœ‰ API è°ƒç”¨éƒ½æœ‰é”™è¯¯å¤„ç†ï¼š

```javascript
try {
  const response = await api.call()
  // æˆåŠŸå¤„ç†
} catch (error) {
  console.error('æ“ä½œå¤±è´¥:', error)
  message.error('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•')
}
```

---

## ğŸ”§ çŠ¶æ€ç®¡ç†è®¾è®¡

ä½¿ç”¨ **Zustand** è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¼˜åŠ¿ï¼š
- ç®€å•ç›´è§‚ï¼Œæ— éœ€ Provider
- æ€§èƒ½ä¼˜ç§€ï¼ŒæŒ‰éœ€æ›´æ–°
- TypeScript æ”¯æŒå‹å¥½

### Store ç»“æ„

```javascript
const useAppStore = create((set, get) => ({
  // æ–‡ä»¶ç›¸å…³
  fileData: null,
  setFileData: (data) => set({ fileData: data }),

  // å­—æ®µé€‰æ‹©
  selectedColumns: [],
  toggleColumn: (colName) => {
    const { selectedColumns } = get()
    set({
      selectedColumns: selectedColumns.includes(colName)
        ? selectedColumns.filter(c => c !== colName)
        : [...selectedColumns, colName]
    })
  },

  // Agent æ‰§è¡Œ
  agentSteps: [],
  addAgentStep: (step) => {
    const { agentSteps } = get()
    set({ agentSteps: [...agentSteps, step] })
  },
  updateAgentStep: (index, updates) => {
    const { agentSteps } = get()
    const newSteps = [...agentSteps]
    newSteps[index] = { ...newSteps[index], ...updates }
    set({ agentSteps: newSteps })
  },

  // å¯¹è¯å†å²
  conversations: [],
  addConversation: (conv) => {
    const { conversations } = get()
    set({ conversations: [...conversations, conv] })
  },
}))
```

### ç»„ä»¶ä½¿ç”¨

```javascript
// è¯»å–çŠ¶æ€
const agentSteps = useAppStore(state => state.agentSteps)

// è°ƒç”¨æ–¹æ³•
const addAgentStep = useAppStore(state => state.addAgentStep)

// æ€§èƒ½ä¼˜åŒ–ï¼šåªè®¢é˜…éœ€è¦çš„çŠ¶æ€
const selectedColumns = useAppStore(state => state.selectedColumns)
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. ä»£ç åˆ†å‰²

ä½¿ç”¨ Vite çš„åŠ¨æ€å¯¼å…¥ï¼š

```javascript
const MonacoEditor = lazy(() => import('@monaco-editor/react'))
```

### 2. è™šæ‹Ÿæ»šåŠ¨

å¯¹äºå¤§é‡æ•°æ®çš„è¡¨æ ¼ï¼Œä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼š

```javascript
<Table
  scroll={{ y: 400 }}
  virtual
/>
```

### 3. é˜²æŠ–ä¼˜åŒ–

æœç´¢è¾“å…¥ä½¿ç”¨é˜²æŠ–ï¼š

```javascript
import { useDebounce } from 'ahooks'

const debouncedSearch = useDebounce(searchText, { wait: 300 })
```

### 4. æŒ‰éœ€åŠ è½½

Ant Design ç»„ä»¶è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ï¼ˆVite æ’ä»¶ï¼‰ã€‚

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹è®¾è®¡

```css
/* ç§»åŠ¨ç«¯ */
@media (max-width: 768px) {
  .field-sidebar {
    width: 100%;
  }
}

/* å¹³æ¿ */
@media (min-width: 768px) and (max-width: 1024px) {
  .field-sidebar {
    width: 250px;
  }
}

/* æ¡Œé¢ */
@media (min-width: 1024px) {
  .field-sidebar {
    width: 300px;
  }
}
```

---

## ğŸ› è°ƒè¯•æŒ‡å—

### å¼€å‘è€…å·¥å…·

1. **React DevTools**ï¼šæŸ¥çœ‹ç»„ä»¶æ ‘å’ŒçŠ¶æ€
2. **Redux DevTools**ï¼šï¼ˆå¦‚æœä½¿ç”¨ Reduxï¼‰
3. **Network é¢æ¿**ï¼šæŸ¥çœ‹ API è¯·æ±‚

### æ—¥å¿—è¾“å‡º

ä»£ç ä¸­ä½¿ç”¨ `console.log` è®°å½•å…³é”®æ“ä½œï¼š

```javascript
console.log('âœ… Session åˆ›å»ºæˆåŠŸ:', sessionId)
console.log('ğŸ¤– Agent ä»»åŠ¡å¯åŠ¨:', response)
console.log('ğŸ“Š Agent çŠ¶æ€:', status, data)
```

æœç´¢æ—¥å¿—å‰ç¼€å¿«é€Ÿå®šä½ï¼š
- âœ…ï¼šæˆåŠŸæ“ä½œ
- ğŸ¤–ï¼šAgent ç›¸å…³
- ğŸ“Šï¼šæ•°æ®ç›¸å…³
- âŒï¼šé”™è¯¯

---

## ğŸ”® æœªæ¥ä¼˜åŒ–æ–¹å‘

### 1. WebSocket æ›¿ä»£è½®è¯¢

```javascript
// å½“å‰ï¼šæ¯2ç§’è½®è¯¢ä¸€æ¬¡
setInterval(() => getAgentStatus(), 2000)

// ä¼˜åŒ–ï¼šWebSocket å®æ—¶æ¨é€
const ws = new WebSocket('ws://localhost:8000/ws')
ws.onmessage = (event) => {
  const step = JSON.parse(event.data)
  addAgentStep(step)
}
```

### 2. ä»£ç ç¼–è¾‘åŠŸèƒ½

å…è®¸ç”¨æˆ·ä¿®æ”¹ AI ç”Ÿæˆçš„ä»£ç ï¼š

```javascript
<Editor
  language="python"
  value={code}
  onChange={setCode}  // å¯ç¼–è¾‘
  readOnly={false}
/>
<Button onClick={runEditedCode}>è¿è¡Œä¿®æ”¹åçš„ä»£ç </Button>
```

### 3. ç¦»çº¿ç¼“å­˜

ä½¿ç”¨ Service Worker ç¼“å­˜å†å²è®°å½•ï¼š

```javascript
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
}
```

### 4. æ›´ä¸°å¯Œçš„å›¾è¡¨ç±»å‹

é›†æˆ ECharts æˆ– Plotly.js æ”¯æŒæ›´å¤šå›¾è¡¨ï¼š
- çƒ­åŠ›å›¾
- 3D å›¾è¡¨
- åœ°å›¾
- åŠ¨æ€å›¾è¡¨

---

## ğŸ“š å‚è€ƒèµ„æº

- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Ant Design ç»„ä»¶åº“](https://ant.design/)
- [Zustand çŠ¶æ€ç®¡ç†](https://github.com/pmndrs/zustand)
- [Monaco Editor](https://microsoft.github.io/monaco-editor/)
- [Vite æ„å»ºå·¥å…·](https://vitejs.dev/)

---

**ä½œè€…**: AI Assistant  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-30  
**ç‰ˆæœ¬**: v1.0.0


